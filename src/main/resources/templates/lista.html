<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
	crossorigin="anonymous">
<link rel="stylesheet" href="css/style.css">



<title>Visualizar</title>
</head>

<header>
	<nav class="navbar navbar-expand-lg fixed-top navbar-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="/inicio"><img
				src="https://upload.wikimedia.org/wikipedia/commons/2/20/EME.png"
				width="50px"></a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav">
					<li class="nav-item"><a class="nav-link " aria-current="page"
						href="/inicio">Inicio</a></li>
					<li class="nav-item"><a class="nav-link"
						href="/cadastro">Cadastrar QED</a></li>
					<li><a class="nav-link active" href="/lista">Visualisar
							QED</a></li>
					<li class="nav-item"><a class="nav-link"
						href="/editarListaDespesas">Editar QED</a></li>
				</ul>
			</div>
		</div>
	</nav>
</header>




<body>


	<div class="containerLista">
	
	
		<div class="cabecalhoTabelaEditar">
			<strong>Despesas registradas:</strong>
		</div>
		<table class="table table-dark table-striped table-hover">
		
		
		<thead>
	    <tr>
	    	<td>Aditância</td>
	        <th scope="col">31.90.04</th>
	        <th scope="col">33.90.30</th>
	        <th scope="col">33.90.33</th>
	        <th scope="col">33.90.36</th>
	        <th scope="col">33.90.39</th>
	        <th scope="col">33.90.40</th>
	        <th scope="col">44.90.52</th>
	    </tr>
	</thead>
	
	
	<select class="filtro" id="mesSelecionado" onchange="filtrarMes()">
		<option value="todos">Todos</option>
		<option value="t1">1º Trimestre</option>
		<option value="t2">2º Trimestre</option>
		<option value="t3">3º Trimestre</option>
		<option value="t4">4º Trimestre</option>
    	<option value="jan">Janeiro</option>
    	<option value="fev">Fevereiro</option>
    	<option value="mar">Março</option>
    	<option value="abr">Abril</option>
    	<option value="mai">Maio</option>
    	<option value="jun">Junho</option>
    	<option value="jul">Julho</option>
    	<option value="ago">Agosto</option>
    	<option value="set">Setembro</option>
    	<option value="out">Outubro</option>
    	<option value="nov">Novembro</option>
    	<option value="dez">Dezembro</option>
    	
    
    </select>
    
    
		<tbody>
	    <tr class="jan" th:each="despesa : ${despesas}">
	    	<td>ÁFRICA DO SUL</td>
	    	<td th:text="${despesa.jan_nd04}"></td>
	    	<td th:text="${despesa.jan_nd30}"></td>
	    	<td th:text="${despesa.jan_nd33}"></td>
	    	<td th:text="${despesa.jan_nd36}"></td>
	    	<td th:text="${despesa.jan_nd39}"></td>
	    	<td th:text="${despesa.jan_nd40}"></td>
	    	<td th:text="${despesa.jan_nd52}"></td>
	    </tbody>
	
	    <tbody>
	    <tr class="fev" th:each="despesa : ${despesas}">
    		<td>ÁFRICA DO SUL</td>
    		<td th:text="${despesa.fev_nd04}"></td>
    		<td th:text="${despesa.fev_nd30}"></td>
    		<td th:text="${despesa.fev_nd33}"></td>
    		<td th:text="${despesa.fev_nd36}"></td>
    		<td th:text="${despesa.fev_nd39}"></td>
    		<td th:text="${despesa.fev_nd40}"></td>
    		<td th:text="${despesa.fev_nd52}"></td>    	
    		</tbody>

	<tbody>
	<tr class="mar" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.mar_nd04}"></td>
		<td th:text="${despesa.mar_nd30}"></td>
		<td th:text="${despesa.mar_nd33}"></td>
		<td th:text="${despesa.mar_nd36}"></td>
		<td th:text="${despesa.mar_nd39}"></td>
		<td th:text="${despesa.mar_nd40}"></td>
		<td th:text="${despesa.mar_nd52}"></td>
	
	</tbody>
	
	<tbody>
	<tr class="abr" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td data-abr-nd04 th:text="${despesa.abr_nd04}"></td>
		<td th:text="${despesa.abr_nd30}"></td>
		<td th:text="${despesa.abr_nd33}"></td>
		<td th:text="${despesa.abr_nd36}"></td>
		<td th:text="${despesa.abr_nd39}"></td>
		<td th:text="${despesa.abr_nd40}"></td>
		<td th:text="${despesa.abr_nd52}"></td>
		
	</tbody>

	<tbody>
	<tr class="mai" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.mai_nd04}"></td>
		<td th:text="${despesa.mai_nd30}"></td>
		<td th:text="${despesa.mai_nd33}"></td>
		<td th:text="${despesa.mai_nd36}"></td>
		<td th:text="${despesa.mai_nd39}"></td>
		<td th:text="${despesa.mai_nd40}"></td>
		<td th:text="${despesa.mai_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="jun" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.jun_nd04}"></td>
		<td th:text="${despesa.jun_nd30}"></td>
		<td th:text="${despesa.jun_nd33}"></td>
		<td th:text="${despesa.jun_nd36}"></td>
		<td th:text="${despesa.jun_nd39}"></td>
		<td th:text="${despesa.jun_nd40}"></td>
		<td th:text="${despesa.jun_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="jul" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.jul_nd04}"></td>
		<td th:text="${despesa.jul_nd30}"></td>
		<td th:text="${despesa.jul_nd33}"></td>
		<td th:text="${despesa.jul_nd36}"></td>
		<td th:text="${despesa.jul_nd39}"></td>
		<td th:text="${despesa.jul_nd40}"></td>
		<td th:text="${despesa.jul_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="ago" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.ago_nd04}"></td>
		<td th:text="${despesa.ago_nd30}"></td>
		<td th:text="${despesa.ago_nd33}"></td>
		<td th:text="${despesa.ago_nd36}"></td>
		<td th:text="${despesa.ago_nd39}"></td>
		<td th:text="${despesa.ago_nd40}"></td>
		<td th:text="${despesa.ago_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="set" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.set_nd04}"></td>
		<td th:text="${despesa.set_nd30}"></td>
		<td th:text="${despesa.set_nd33}"></td>
		<td th:text="${despesa.set_nd36}"></td>
		<td th:text="${despesa.set_nd39}"></td>
		<td th:text="${despesa.set_nd40}"></td>
		<td th:text="${despesa.set_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="out" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.out_nd04}"></td>
		<td th:text="${despesa.out_nd30}"></td>
		<td th:text="${despesa.out_nd33}"></td>
		<td th:text="${despesa.out_nd36}"></td>
		<td th:text="${despesa.out_nd39}"></td>
		<td th:text="${despesa.out_nd40}"></td>
		<td th:text="${despesa.out_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="nov" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.nov_nd04}"></td>
		<td th:text="${despesa.nov_nd30}"></td>
		<td th:text="${despesa.nov_nd33}"></td>
		<td th:text="${despesa.nov_nd36}"></td>
		<td th:text="${despesa.nov_nd39}"></td>
		<td th:text="${despesa.nov_nd40}"></td>
		<td th:text="${despesa.nov_nd52}"></td>
		
	</tbody>
	
	<tbody>
	<tr class="dez" th:each="despesa : ${despesas}">
		<td>ÁFRICA DO SUL</td>
		<td th:text="${despesa.dez_nd04}"></td>
		<td th:text="${despesa.dez_nd30}"></td>
		<td th:text="${despesa.dez_nd33}"></td>
		<td th:text="${despesa.dez_nd36}"></td>
		<td th:text="${despesa.dez_nd39}"></td>
		<td th:text="${despesa.dez_nd40}"></td>
		<td th:text="${despesa.dez_nd52}"></td>
		
	</tbody>
	
	<tfoot>
    <tr id="totalRow" style="font-weight: bold;">
        <td>Total</td>
        
        <td id="total_nd04">0.00</td>
        <td id="total_nd30">0.00</td>
        <td id="total_nd33">0.00</td>
        <td id="total_nd36">0.00</td>
        <td id="total_nd39">0.00</td>
        <td id="total_nd40">0.00</td>
        <td id="total_nd52">0.00</td>
    </tr>
</tfoot>
	
		</table>
	
		
		
	</div>
	<script src="https://kit.fontawesome.com/85e3e5acdc.js" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	
	<script>
    function filtrarMes() {
        var mesSelecionado = document.getElementById("mesSelecionado").value;

        document.querySelectorAll("tbody tr").forEach(function (row) {
            row.style.display = "none";
        });

        if (mesSelecionado === "todos") {
            document.querySelectorAll("tbody tr").forEach(function (row) {
                row.style.display = "";
            });
            
        } else {
        
        var mesesSelecionado = [];

        if (mesSelecionado.startsWith("t")) {
            var trimestre = parseInt(mesSelecionado.charAt(1));
            for (var i = (trimestre - 1) * 3 + 1; i <= trimestre * 3; i++) {
                mesesSelecionado.push(getNomeMes(i));
            }
        } else {
        		mesesSelecionado.push(mesSelecionado);
        }

        mesesSelecionado.forEach(function (mesSelecionado) {
        	document.querySelectorAll("tbody tr." + mesSelecionado).forEach(function (row){
        		row.style.display = "";
        	});
        });
    	}
        calcularSoma();
    }
    
    function calcularSoma() {
        var totalColuna1 = 0;
        var totalColuna2 = 0;
        var totalColuna3 = 0;
        var totalColuna4 = 0;
        var totalColuna5 = 0;
        var totalColuna6 = 0;
        var totalColuna7 = 0;

        // Percorra todas as linhas visíveis da tabela
        document.querySelectorAll("tbody tr").forEach(function (row) {
            // Adicione os valores das colunas à soma total
        	if (window.getComputedStyle(row).display !== "none") {
            totalColuna1 += parseFloat(row.cells[1].innerText) || 0;
            totalColuna2 += parseFloat(row.cells[2].innerText) || 0;
            totalColuna3 += parseFloat(row.cells[3].innerText) || 0;
            totalColuna4 += parseFloat(row.cells[4].innerText) || 0;
            totalColuna5 += parseFloat(row.cells[5].innerText) || 0;
            totalColuna6 += parseFloat(row.cells[6].innerText) || 0;
            totalColuna7 += parseFloat(row.cells[7].innerText) || 0;
        	}
        });

        // Atualize os totais no tfoot
        document.getElementById("total_nd04").innerText = totalColuna1.toFixed(2);
        document.getElementById("total_nd30").innerText = totalColuna2.toFixed(2);
        document.getElementById("total_nd33").innerText = totalColuna3.toFixed(2);
        document.getElementById("total_nd36").innerText = totalColuna4.toFixed(2);
        document.getElementById("total_nd39").innerText = totalColuna5.toFixed(2);
        document.getElementById("total_nd40").innerText = totalColuna6.toFixed(2);
        document.getElementById("total_nd52").innerText = totalColuna7.toFixed(2);
    }

    // Chame a função sempre que necessário, por exemplo, após filtrar as linhas
    calcularSoma();
    	

    	
    	function getNomeMes(numero) {
    	    var meses = ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez"];
    	    return meses[numero - 1];
    	}
    	
    
    
    </script>
	
</body>
</html>